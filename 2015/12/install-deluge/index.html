<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Install Deluge on Ubuntu Server | CodeRuse</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:300|Roboto:300|Inconsolata"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">CodeRuse</a><!--span.subtitle= config.subtitle--><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><div id="top-nav" class="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" target="_blank" class="sidebar-nav-item">Archives</a><a href="http://galleries.coderuse.com" target="_blank" class="sidebar-nav-item">Galleries</a><a href="/about" target="_blank" class="sidebar-nav-item">About</a></div></div><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Install Deluge on Ubuntu Server</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">Dec 13, 2015</div><div class="post-categories"><a class="post-category-link" href="/categories/Cookbook/">Cookbook</a>><a class="post-category-link" href="/categories/Cookbook/System/">System</a>><a class="post-category-link" href="/categories/Cookbook/System/Technical/">Technical</a></div><div class="post-tags"><a class="post-tag-link" href="/tags/deluge/">deluge</a>/<a class="post-tag-link" href="/tags/torrent/">torrent</a>/<a class="post-tag-link" href="/tags/ubuntu/">ubuntu</a></div></div></div><article><div class="container post"><p>Deluge is a very efficient torrent download/seeding client with a moderately good standard web ui. Though torrent is not acceptable to some extent on the moral ground, I can accept it to download software, songs, movies etc. for small personal uses. Actually why not. I live in India. Most of the Hollywood movies does not release in the theaters. The price of a Western music label is more than per capita income in this country. And I’m not going to sell or do some kind of business with the downloaded digital assets. And most of the movies are not that good to view multiple times. So download-watch-delete cycle is destined for them. With these logic I can justify my use of torrents.</p>
<p>There are several clients to use torrent. Why do we need one client with web ui. To remotely administer the download. Why? Personally I don’t like to keep my pc turned on whole night-n-day to download large files. And sometimes it really takes a painfully long time to download. Therefore we need to have a low cost solution for this task. You can setup one Raspberry PI in your home for this. Or you can buy one cheap VPS or if you are damn serious about seeding you can get one dedicated server with a good bandwidth allocation from a p2p allowing provider. In any of this cases you need one sufficiently robust torrent client with an acceptable ui. Deluge is one of the best in this category.</p>
<p>Let’s start. <a id="more"></a> To start this thing, we have to understand that the world of torrent is really full of very troublesome torrents. Before leaving our server to download our favorite entertainment, we must secure our server to some extent with some defensive measures. [I’ll try to add a different post for this purpose]</p>
<p>One thing is that, to execute this whole procedure, one need to have at-least system administrator privilege for the login. First log into the system. If the login is for normal user, execute the command <span class="lang:sh decode:true crayon-inline ">sudo -i</span>  and when prompted give your login password.</p>
<p>To run the Deluge server on our box, we will need one different user, than the users, we use to login into our system. For example we are using ‘<em>deluge</em>‘ as the name for both of our user and group.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adduser --disabled-password --system --home /var/lib/deluge --gecos <span class="string">"Deluge Server"</span> --group deluge</span><br></pre></td></tr></table></figure>
<ul>
<li><code>--disabled-password</code>  disables the login with password, however login can be done by other means, for example by SSH RSA keys (though we don’t require this feature)</li>
<li><code>--system</code>  specifies that both user and group will be one SYSTEM user and group</li>
<li><code>--home</code>  specifies ‘<em>/var/lib/deluge</em>‘ as the home directory of the newly created user (for us it’s ‘<em>deluge</em>‘). One more thing is that, by default <em>Deluge</em> will be installed in this location</li>
<li><code>--gecos</code>  Specifies META data, to be inserted into the ‘<em>/etc/passwd</em>‘ about the user. Typically this information may be phone number, name of the user etc. We can put any information after this in double quote</li>
<li><code>--group</code>  this option combined with ‘<em>–system</em>‘, creates user and group with same name specified after this (for now, it’s ‘<em>deluge</em>‘)</li>
</ul>
<p>To run <em>Deluge</em>, we need to run <em>Deluge Server</em> and <em>Deluge Web</em>. The <em>web</em> component is the interface for the user to interact with the <em>Deluge Server</em>. Now we need to create <em>two</em> files to be logged by two components. We can do that by:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">touch /var/<span class="built_in">log</span>/deluged.log</span><br><span class="line">touch /var/<span class="built_in">log</span>/deluge-web.log</span><br><span class="line">chown deluge:deluge /var/<span class="built_in">log</span>/deluge*&lt;/pre&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>touch</code>  is a <em>*nix</em> utility to change the time-stamp of a file and if the file does not exist, it creates one empty file with the name and location specified</li>
<li><code>chown</code>  adds the ownership to the user and group specified. Here we have given permission/ownership of ‘<em>/var/log</em>‘ to user <em>deluge</em> of group <em>deluge</em> to write logs into the said directory</li>
</ul>
<p>We have to add the <em>Deluge</em> ‘<em>ppa</em>‘ repository to get the latest package published for your <em>Ubuntu</em> distribution.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install software-properties-common</span><br><span class="line">add-apt-repository ppa:deluge-team/ppa</span><br><span class="line">apt-get update</span><br></pre></td></tr></table></figure>
<ul>
<li><code>software-properties-common</code>  gives the ‘<em>add-apt-repository</em>‘ command</li>
<li><code>apt-get update</code>  updates our <em>apt</em> cache for installation and update of software packages in the box</li>
</ul>
<p>Now we are ready to install the <em>Deluge</em> packages.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install deluged deluge-webui&lt;/pre&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>deluged</code>  is the <em>Deluge</em> server and</li>
<li><code>deluge-webui</code>  is the web interface of <em>Deluge</em></li>
</ul>
<p>To start <em>Deluge</em> server and <em>Deluge WebUI</em> at the start, we need to create two files in the <code>/etc/init</code>  directory. Use your favorite editor to create the <em>init</em> script for <em>Deluge</em> daemon (server) <code>/etc/init/deluged.conf</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">description <span class="string">"Deluge daemon"</span></span><br><span class="line">author <span class="string">"Deluge Team"</span></span><br><span class="line"></span><br><span class="line">start on filesystem and static-network-up</span><br><span class="line">stop on runlevel [<span class="number">016</span>]</span><br><span class="line"></span><br><span class="line">respawn</span><br><span class="line">respawn <span class="built_in">limit</span> <span class="number">5</span> <span class="number">30</span></span><br><span class="line"></span><br><span class="line">env uid=deluge</span><br><span class="line">env gid=deluge</span><br><span class="line">env <span class="built_in">umask</span>=<span class="number">000</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> start-stop-daemon -S -c <span class="variable">$uid</span>:<span class="variable">$gid</span> -k <span class="variable">$umask</span> -x /usr/bin/deluged -- <span class="operator">-d</span></span><br></pre></td></tr></table></figure>
<p>and for <em>Deluge WebUI</em> <code>/etc/init/deluge-web.conf</code> .</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">description <span class="string">"Deluge Web UI"</span></span><br><span class="line">author <span class="string">"Deluge Team"</span></span><br><span class="line"></span><br><span class="line">start on started deluged</span><br><span class="line">stop on stopping deluged</span><br><span class="line"></span><br><span class="line">respawn</span><br><span class="line">respawn <span class="built_in">limit</span> <span class="number">5</span> <span class="number">30</span></span><br><span class="line"></span><br><span class="line">env uid=deluge</span><br><span class="line">env gid=deluge</span><br><span class="line">env <span class="built_in">umask</span>=<span class="number">027</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> start-stop-daemon -S -c <span class="variable">$uid</span>:<span class="variable">$gid</span> -k <span class="variable">$umask</span> -x /usr/bin/deluge-web</span><br></pre></td></tr></table></figure>
<p>There are more details about this configurations <a href="http://dev.deluge-torrent.org/wiki/UserGuide/Service/Upstart" target="_blank" rel="external">here</a>.</p>
<p>Now we can reboot our server by <code>init 6</code>  or <code>reboot -h now</code>  or start the <em>Deluge</em> services by</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service deluged start</span><br><span class="line">service deluge-web start</span><br></pre></td></tr></table></figure>
<p>Access the web interface at port <em>8112</em>. <code>http://yourserver_IP_OR_domain:8112</code> . It will prompt for a password. Type ‘<em>deluge</em>‘ and login. This is the default password for the WebUI. And we must change our password upon first login.</p>
<p><img src="http://i.imgur.com/RbZcl4F.png" alt=""></p>
<p>&nbsp;</p>
<p>Also it may be required to connect the <em>daemon</em> by clicking the ‘<em>Connection Manager</em>‘ button at the top task-bar.</p>
<p>This is not complete. Yet we have to do a little configuration for the <em>Deluge Daemon</em> and mask our web port with a good context name on our server. We will use NginX for this. And along with that we will add a new security measure. But this is pending for next post. Until then have a good time. :)</p>
</div><!-- comment system--><div class="container"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'coderuse';
var disqus_identifier = '2015/12/install-deluge/';
var disqus_title = "Install Deluge on Ubuntu Server";
var disqus_url = 'http://coderuse.com/2015/12/install-deluge/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a></div></article><div id="footer"><div class="container"><div class="bar"><div class="social"><a href="http://twitter.com/coderuse" target="_blank"><i class="fa fa-twitter"></i></a><a href="https://github.com/coderuse" target="_blank"><i class="fa fa-github"></i></a><a href="https://plus.google.com/+ArnabDasUIDeveloper" target="_blank"><i class="fa fa-google-plus"></i></a><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© <a href="/" rel="nofollow">CodeRuse</a> | <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a></div></div></div></div><script>var trackID = 'UA-70816071-1', domainID = 'coderuse.com';(function (i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r] || function(){(i[r].q=i[r].q || []).push(arguments);},i[r].l = 1 * new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.defer=1;a.src=g;m.parentNode.insertBefore(a,m)})(window, document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', trackID, domainID);ga('send', 'pageview');</script></body></html>